import minimalmodbus
from dataclasses import dataclass

@dataclass
class Sample(object):
    batteryVoltage: int
    batteryCurrent: int
    gridVoltage: int
    loadPercent: int
    inverterVoltage: int
    loadPower: int
    acRadiatorTemperature: int
    accumulatedPower: int
    pvVoltage: float
    chChargerCurrent: int
    chargerPower: int
    radiatorTemperature: int
    batStopDischargingV: int
    batStopChargingV: int
    batLowVoltage: int
    inverterCurrent: int
    gridCurrent: int
    loadCurrent: int
    gridPower: int
    inverterFrequency: float
    gridFrequency: int
    transformerTemperature: int
    dcRadiatorTemperature: int
    accumulatedChargerPower: int
    accumulatedDischargerPower: int
    accumulatedBuyPower: int
    accumulatedSellPower: int
    accumulatedLoadPower: int
    accumulatedSelfUsePower: int
    accumulatedPvSellPower: int
    accumulatedGridChargerPower: int
    batteryPower: int
    ChargingState: str
    workState: str
    mpptState: str

class UPS(object):
    def __init__(self, device_path: str, device_id: int, baud_rate: int):
        self.device_path = device_path
        self.device_id = device_id
        self.baud_rate = baud_rate

        self.scc = minimalmodbus.Instrument(device_path, device_id)
        self.scc.serial.baudrate = baud_rate
        self.scc.serial.timeout = 0.5

    def sample(self) -> Sample:
        pass
